# Give HTLCHandlingFailed a reason of some kind

- [Previous PR](https://github.com/lightningdevkit/rust-lightning/pull/2933)
  added more instances of `HTLCHandlingFailed`
- Nice to give the event a reason code to provide more information

Things I should figure out here:

Are there other events with reason fields?
- It's part of the events module's `Event` type which represents all
  the actions that a user would have to take action to address
- Some examples of other events with reasons:
  - `PaymentFailed` has `Option<PaymentFailureReason>`
    - This contains various explanations for the failure
    - It's an `Option<>` because it wasn't previously included
  - `ChannelClosed` has a `ClosureReason`:
    - Also various explanations of the channel closure
    - Not an option, assuming because it was always present

Where is `HTLCHandlingFailed` used?
- channelmanager / fail_htlc_backwards_internal_without_forward_event
  - fail_htlc_backwards_internal (all have HTLCFailReason b/c arg)
    - fail_intercepted_htlc (unknown next hop / has HTLCFailReason)
    - process_pending_htlc_forwards
    - timer_tick_occurred (mpp timeout / has HTLCFailReason)
    - fail_htlc_backwards_with_reason (var / has HTLCFailReason)
    - fail_holding_cell_htlcs (variable / has HTLCFailReason)
  - forward_htlcs_without_forward_event
    - forward_htlcs (invalid forward / has HTLCFailReason)
    - process_pending_update_add_htlcs (has HTLCFailReason)

A HTLCFailReason enum already exists? But it's the protocol one and it's
in a different crate to the events:
- Do we want a different enum in the events mod (maybe that direction
  of import is a no-go?)
